<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
		   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		   xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

	<services>
		<service id="feedService.rss" class="Pascal\FeedGathererBundle\Service\RssFeedService" public="false">
			<argument type="service" id="doctrine" strict="false" />
			<argument type="service" id="simplepie.rss" strict="false"/>
			<argument>%kernel.cache_dir%</argument>
		</service>

		<service id="feedService.twitter" class="Pascal\FeedGathererBundle\Service\TwitterFeedService" public="false">
			<argument type="service" id="doctrine" strict="false" />
			<argument type="service" id="twitter.rss" strict="false"/>
		</service>

		<service id="feedHandler" class="Pascal\FeedGathererBundle\Service\FeedHandlerService">
			<call method="addFeedHandler">
				<argument type="service" id="feedService.rss"/>
			</call>
			<call method="addFeedHandler">
				<argument type="service" id="feedService.twitter"/>
			</call>
		</service>

		<service id="feedDownloader" class="Pascal\FeedGathererBundle\Service\FeedDownloaderService">
			<argument type="service" id="doctrine" strict="false" />
			<argument type="service" id="feedHandler" strict="false" />
		</service>

	</services>

</container>
